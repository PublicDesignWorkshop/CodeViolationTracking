# Web Admin Readme

This guide walks through the basic tasks we imagine a web administrator will need to handle with this application.

## Starting/Stopping

To start the server, all a web adminstrator needs to do is run node on the server.js file in the root directory of the application. We recommend using a seperate [screen](https://help.ubuntu.com/community/Screen) for this task.

```
node server.js
```

To stop the web application, re-attach the screen if necessary and close the node process (Ctrl+C). 

## Common Admin Tasks

Here we outline a few common tasks that we expect a web admin to need to complete. Although each of these tasks is a discrete concern, they are all based on manipulating the environment variables for the node process. If set-up properly, editing a .env file in the root directory can be done with one's favorite text editor. We recommend Nano.

```
nano .env
```

The .env file should look like this (with different values for each variable)

```
PORT=3001
PASSWORD="12345"
DRIVE_PHOTOFOLDERID="1lB53NoYKh26pQUi1YqFY2MtwKYe7gsEA"
DRIVE_SPREADSHEETID='1KYZOVHZM7KVj0jVMx8H95jqPP3jjVC5vQUIewIRb33w'
```

### Switching Spreadsheets

To switch the spreadsheet, meaning you wish to change which spreadsheet the system is reading metadata from (the list of addresses) and writing rawdata too (the actual submitted code violation data), the admin needs to change the DRIVE_SPREADSHEETID variable.

The drive spreadsheet variable is the ID of the spreadsheet on Drive, which can be found in the URL when the given spreadsheet is open.

https://docs.google.com/spreadsheets/d/HeresWhereIDIsInURL/editOnce 

The spreadsheet must based off the template spreadsheet document in the repo. 

### Switching Photo Folders

To switch the photo folder, meaning which folder is used as the root folder for photo uploads, the admin needs to change the DRIVE_PHOTOFOLDERID variable.

The drive photo folder variable is a the ID of the folder on Drive, which can be found in the URL when the given folder is open.

https://drive.google.com/drive/folders/HeresWhereIDIsInURL

The name of the folder and it's contents are managed by the app

### Swapping Google Accounts

To switch the photo folder, meaning which account credentials are used for communicating with the Google APIS, you need to swap the "master-creds.json" file. This file is generated by Google from their API console, found here.

https://console.developers.google.com

### Changing Password

To switch the password the admin needs to change the PASSWORD variable in the .env file